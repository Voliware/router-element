class RouteElement extends HTMLElement{constructor(){super(),this.routes=new Map,this.current_url="",this.is_initialized=!1,new MutationObserver(t=>{t.forEach(t=>{switch(t.type){case"childList":const e=[...t.addedNodes,...t.removedNodes];if(e.length)for(let t=0;t<e.length;t++){const i=e[t].tagName;if(i&&"route-element"===i.toLowerCase()){this.findRoutes();break}}if(t.removedNodes.length)for(let e=0;e<t.removedNodes.length;e++)if(this.current_url===t.removedNodes[e].getAttribute("url")){this.current_url="",this.dispatchEvent(new Event("removed",{bubbles:!0}));break}break;case"attributes":const i=new CustomEvent("urlchanged",{detail:t.oldValue,bubbles:!0});this.dispatchEvent(i)}})}).observe(this,{attributes:!0,attributeOldValue:!0,attributeFilter:["url"],childList:!0})}connectedCallback(){this.findRoutes()}init(){this.is_initialized||(this.is_initialized=!0,this.initialize())}initialize(){}toggle(t){const e=this.getAttribute("display")||"block";this.style.display=t?e:"none"}findRoutes(){this.routes.clear();for(let t=0;t<this.children.length;t++){const e=this.children[t];e instanceof RouteElement&&(this.routes.set(e.getAttribute("url"),e),e.addEventListener("urlchanged",({detail:t})=>{this.current_url===t&&(this.current_url="")}))}}route(t){if("string"!=typeof t)console.warn("Invalid URL passed to route()");else if("/"===t||""===t)this.setRoute(t);else for(const[e,i]of this.routes)if("/"!==e&&""!==e&&t.includes(e)){this.setRoute(e),i.route(t);break}}setRoute(t){const e=this.routes.get(t);if(e){if(""!==this.current_url){this.routes.get(this.current_url).toggle(!1)}this.current_url=t,e.toggle(!0),e.init()}}}customElements.define("route-element",RouteElement);class RouterElement extends RouteElement{constructor(){super(),this.history_allowed="file:"!==window.location.protocol}connectedCallback(){this.findRoutes(),"false"!==this.getAttribute("back")&&window.addEventListener("popstate",()=>{this.route(window.location.pathname,!1)}),"false"!==this.getAttribute("auto")&&this.init()}initialize(){this.route(window.location.pathname,!1)}route(t,e=!0){e&&this.history_allowed&&"false"!==this.getAttribute("history")&&window.history.pushState(null,null,t),super.route(t)}}customElements.define("router-element",RouterElement);